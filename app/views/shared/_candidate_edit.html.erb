<%= render :partial => "error" %>
<%= render :partial => "notice" %>
<% form_tag :action => @action do -%>
  <fieldset id='personal'>
    <legend><%= t(:personal_details, :scope => [:view, :shared, :_candidate_edit]) %></legend>
    <%= hidden_field 'candidate', 'id' %>
    <label for='candidate_firstname' class='required'><%= t(:message_1, :scope => [:view, :shared, :_candidate_edit]) %></label>
    <%= text_field 'candidate', 'firstname', 'size' => '30' %><span class='required'>&nbsp;&lowast;</span ><br />
    <label for='candidate_lastname' class='required'><%= t(:message_2, :scope => [:view, :shared, :_candidate_edit]) %></label>
    <%= text_field 'candidate', 'lastname', 'size' => '30' %><span class='required'>&nbsp;&lowast;</span ><br />
    <label for='candidate_title_before_id'><%= t(:message_3, :scope => [:view, :shared, :_candidate_edit]) %></label>
    <%= select 'candidate', 'title_before_id', title_before_ids %><br />
    <label for='candidate_title_after_id'><%= t(:message_4, :scope => [:view, :shared, :_candidate_edit]) %></label>
    <%= select 'candidate', 'title_after_id', title_after_ids %><br />
    <label class='required'><%= t(:message_5, :scope => [:view, :shared, :_candidate_edit]) %></label>
    <%= date_select 'candidate', 'birth_on', :start_year => Date.today.year - 21,
       :end_year => Date.today.year - 90, :order => [:day, :month, :year],
       :use_month_numbers => true %><span class='required'>&nbsp;&lowast;</span ><br />
    <label for='candidate_birth_at' class='required'><%= t(:message_6, :scope => [:view, :shared, :_candidate_edit]) %></label>
    <%= text_field 'candidate', 'birth_at', 'size' => '30' %><span class='required'>&nbsp;&lowast;</span ><br />
    <label for="candidate_department_id"><%= t(:message_7, :scope => [:view, :shared, :_candidate_edit]) %></label>
    <%= sex_select 'candidate', 'sex' %><br />
    <label for='candidate_state' class='required'><%= t(:message_8, :scope => [:view, :shared, :_candidate_edit]) %></label>
    <%= localized_country_select 'candidate', 'state', []  %>
    <span class='required'>&nbsp;&lowast;</span ><br />
    <label for='candidate_birth_number' class='required'><%= t(:message_9, :scope => [:view, :shared, :_candidate_edit]) %></label>
    <%= text_field 'candidate', 'birth_number', 'size' => '11' %><span class='required'>&nbsp;&lowast;</span ><br />
  </fieldset>
  <fieldset id='contact'>
    <legend><%= t(:message_10, :scope => [:view, :shared, :_candidate_edit]) %></legend>
    <label for='candidate_email' class='required'><%= t(:message_11, :scope => [:view, :shared, :_candidate_edit]) %></label>
    <%= text_field 'candidate', 'email', 'size' => '30' %><span class='required'>&nbsp;&lowast;</span ><br />
    <label for='candidate_phone'><%= t(:message_12, :scope => [:view, :shared, :_candidate_edit]) %></label>
    <%= text_field 'candidate', 'phone', 'size' => '30' %><br />
  </fieldset>
  <fieldset id='address'>
    <legend><%= t(:message_13, :scope => [:view, :shared, :_candidate_edit]) %></legend>
    <label for='candidate_street' class='required'><%= t(:message_14, :scope => [:view, :shared, :_candidate_edit]) %></label>
    <%= text_field 'candidate', 'street', 'size' => '30' %><span class='required'>&nbsp;&lowast;</span ><br />
    <label for='candidate_street' class='required'><%= t(:message_15, :scope => [:view, :shared, :_candidate_edit]) %></label>
    <%= text_field 'candidate', 'number', 'size' => '6' %><span class='required'>&nbsp;&lowast;</span ><br />
    <label for='candidate_city' class='required'><%= t(:message_16, :scope => [:view, :shared, :_candidate_edit]) %></label>
    <%= text_field 'candidate', 'city', 'size' => '30' %><span class='required'>&nbsp;&lowast;</span ><br />
    <label for='candidate_zip' class='required'><%= t(:message_17, :scope => [:view, :shared, :_candidate_edit]) %></label>
    <%= text_field 'candidate', 'zip', 'size' => '10' %><span class='required'>&nbsp;&lowast;</span ><br />
    <label for='candidate_zip' class='required'><%= t(:message_18, :scope => [:view, :shared, :_candidate_edit]) %></label>
    <%= localized_country_select 'candidate', 'address_state', []  %>
    <span class='required'>&nbsp;&lowast;</span ><br />
  </fieldset>
  <fieldset id='postal_address'>
    <legend><%= t(:message_19, :scope => [:view, :shared, :_candidate_edit]) %> - <%= t(:message_20, :scope => [:view, :shared, :_candidate_edit]) %></legend>
    <label for='candidate_postal_street' > <%= t(:message_21, :scope => [:view, :shared, :_candidate_edit]) %></label>
    <%= text_field 'candidate', 'postal_street', 'size' => '30' %><br />
    <label for='candidate_postal_number' ><%= t(:message_22, :scope => [:view, :shared, :_candidate_edit]) %></label>
    <%= text_field 'candidate', 'postal_number', 'size' => '6' %><br />
    <label for='candidate_postal_city' ><%= t(:message_23, :scope => [:view, :shared, :_candidate_edit]) %></label>
    <%= text_field 'candidate', 'postal_city', 'size' => '30' %><br />
    <label for='candidate_postal_zip'><%= t(:message_24, :scope => [:view, :shared, :_candidate_edit]) %></label>
    <%= text_field 'candidate', 'postal_zip', 'size' => '10' %><br />
    <label for='candidate_postal_state'><%= t(:message_25, :scope => [:view, :shared, :_candidate_edit]) %></label>
    <%= text_field 'candidate', 'postal_state', 'size' => '30' %><br />
  </fieldset>
  <fieldset id='sholarship'>
    <legend><%= t(:message_26, :scope => [:view, :shared, :_candidate_edit]) %></legend>
    <label for="candidate_university" class='required'><%= t(:message_27, :scope => [:view, :shared, :_candidate_edit]) %></label>
    <%= text_field 'candidate', 'university', 'size' => '30' %><span class='required'>&nbsp;&lowast;</span ><br />
    <label for="candidate_faculty" class='required'><%= t(:message_28, :scope => [:view, :shared, :_candidate_edit]) %></label>
    <%= text_field 'candidate', 'faculty', 'size' => '30' %><span class='required'>&nbsp;&lowast;</span ><br />
    <label for="candidate_studied_specialization" class='required'><%= t(:message_30, :scope => [:view, :shared, :_candidate_edit]) %></label>
    <%= text_field 'candidate', 'studied_specialization', 'size' => '30' %><span class='required'>&nbsp;&lowast;</span><br />
    <label class='required'><%= t(:message_31, :scope => [:view, :shared, :_candidate_edit]) %></label>
    <%= date_select 'candidate', 'study_end', :start_year => Date.today.year,  :end_year => Date.today.year - 60,
    :order => [:day, :month, :year], :use_month_numbers => true %><span class='required'>&nbsp;&lowast;</span ><br />
  </fieldset>
  <fieldset id='practice'>
    <legend><%= t(:message_32, :scope => [:view, :shared, :_candidate_edit]) %></legend>
    <label for="candidate_employer"><%= t(:message_33, :scope => [:view, :shared, :_candidate_edit]) %></label>
    <%= text_field 'candidate', 'employer', 'size' => '30'  %><br />
    <label for="candidate_employer_address"><%= t(:message_34, :scope => [:view, :shared, :_candidate_edit]) %></label>
    <%= text_field 'candidate', 'employer_address', 'size' => '30'  %><br />
    <label for="candidate_employer_email"><%= t(:message_35, :scope => [:view, :shared, :_candidate_edit]) %></label>
    <%= text_field 'candidate', 'employer_email', 'size' => '30'  %><br />
    <label for="candidate_employer_phone"><%= t(:message_36, :scope => [:view, :shared, :_candidate_edit]) %></label>
    <%= text_field 'candidate', 'employer_phone', 'size' => '30'  %><br />
    <label for="candidate_position"><%= t(:message_37, :scope => [:view, :shared, :_candidate_edit]) %></label>
    <%= text_field 'candidate', 'position', 'size' => '30'  %><br />
  </fieldset>
  <fieldset id='study'>
    <legend><%= t(:message_38, :scope => [:view, :shared, :_candidate_edit]) %></legend>
    <%= hidden_field 'candidate', 'specialization_id' %>
    <label for="candidate_study_id" class="required"><%= t(:message_40, :scope => [:view, :shared, :_candidate_edit]) %></label>
    <%= select 'candidate', 'study_id', study_ids %><span class='required'>&nbsp;&lowast;</span ><br />
    <label for="candidate_language1" class="required"><%= t(:message_41, :scope => [:view, :shared, :_candidate_edit]) %></label>
    <%= select 'candidate', 'language1_id', LanguageSubject.for_select(:specialization => @candidate.specialization_id) %><span class='required'>&nbsp;&lowast;</span ><br />
    <% if @candidate.admitting_faculty.id == 4 %>
    <label for="candidate_language2" class="required">&nbsp;</label>
    <%= select 'candidate', 'language2_id', [[t(:technical_english, :scope => [:view, :shared, :_candidate_edit]), 9005]] %><span class='required'>&nbsp;&lowast;</span ><br />
    <% elsif @candidate.admitting_faculty.id != 14 %>
    <label for="candidate_language2" class="required">&nbsp;</label>
    <%= select 'candidate', 'language2_id', LanguageSubject.for_select(:specialization => @candidate.specialization_id) %><span class='required'>&nbsp;&lowast;</span ><br />
    <% end %>
    <% if AdmittanceTheme.has_for?(@candidate.specialization) %>
      <label for="candidate_department_id" class="required"><%= t(:message_39, :scope => [:view, :shared, :_candidate_edit]) %></label>
      <%= select 'candidate', 'department_id', departments_for(@candidate.specialization) %><span class='required'>&nbsp;&lowast;</span ><br />
      <label for="candidate_admitance_theme_id" class="required"><%= t(:message_42, :scope => [:view, :shared, :_candidate_edit]) %></label>
      <%= select 'candidate', 'admittance_theme_id', admittance_themes_for(@candidate.specialization) %>
      <%= hidden_field 'candidate', 'study_theme', :value => ''%><span class='required'>&nbsp;&lowast;</span ><br />
    <% else %>
      <label for="candidate_department_id"><%= t(:message_39, :scope => [:view, :shared, :_candidate_edit]) %></label>
      <%= select 'candidate', 'department_id', Department.for_select(:faculty => @candidate.specialization.faculty.id) %><br />
      <label for="candidate_study_theme"><%= t(:message_42, :scope => [:view, :shared, :_candidate_edit]) %></label>
      <%= text_area 'candidate', 'study_theme', :cols => 40, :rows => 2 %><br />
    <% end %>
  </fieldset>
  <fieldset id='note'>
    <label for="candidate_note"><%= t(:message_43, :scope => [:view, :shared, :_candidate_edit]) %></label>
    <%= text_area 'candidate', 'note', :cols => 40, :rows => 6 %>
  </fieldset>
  <fieldset id='action'>
    <legend><%= t(:message_44, :scope => [:view, :shared, :_candidate_edit]) %></legend>
    <input type='submit' value='<%= t(:message_45, :scope => [:view, :shared, :_candidate_edit]) %>' class='button' />&nbsp;
    <input type='reset' value='<%= t(:message_46, :scope => [:view, :shared, :_candidate_edit]) %>' class='button'/>
  </fieldset>
  <% end %>
  <script  type="text/javascript">
    Field.activate('candidate_firstname')
  </script>
